/*! ember-typeahead 01-08-2014 */
!function(){"use strict";Ember.TypeAheadComponent=Ember.TextField.extend({didInsertElement:function(){this._super();var a=this;if(!(this.get("local")||this.get("prefetch")||this.get("remote")||this.get("source")))throw"No data source set";this.get("local")&&jQuery.isFunction(this.get("local").then)?this.get("local").then(function(b){a.local=b,a.initializeTypeahead()}):this.initializeTypeahead(),this.get("typeaheadClassNames")&&this.$().parent().addClass(this.get("typeaheadClassNames")),this.get("inputClassNames")&&this.$().addClass(this.get("inputClassNames")),this.get("hintClassNames")&&this.$().parent().find(".tt-hint").addClass(this.get("hintClassNames")),this.get("placeholder")&&this.$().attr("placeholder",this.get("placeholder"))},initializeTypeahead:function(){var a=this,b=null;if(this.get("source"))b=this.get("source");else{var c=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:this.get("local")||null,prefetch:this.get("prefetch")||null,remote:this.get("remote")||null});c.initialize(),b=c.ttAdapter()}if(this.typeahead=this.$().typeahead({hint:this.get("hint")||!0,highlight:this.get("highlight")||!0,minLength:this.get("minLength")||1},{name:this.get("name")||"typeahead",displayKey:this.get("displayKey")||"value",source:b,templates:this.get("templates")||{}}),this.typeahead.on("typeahead:selected",function(b,c){a.set("selection",Ember.Object.create(c)),a.set("cursor",Ember.Object.create(c))}),this.typeahead.on("typeahead:autocompleted",function(b,c){a.set("selection",Ember.Object.create(c)),a.set("cursor",Ember.Object.create(c))}),this.typeahead.on("typeahead:cursorchanged",function(b,c){a.set("cursor",Ember.Object.create(c))}),this.get("value"))this.typeahead.typeahead("val",this.get("value"));else if(this.get("selection")){var d=this.get("displayKey");this.typeahead.typeahead("val",this.get("selection."+d))}},valueObserver:function(){var a=this.get("displayKey");this.typeahead.typeahead("val")!=this.get("value")&&this.get("cursor."+a)!=this.get("value")&&this.typeahead.typeahead("val",this.get("value"))}.observes("value")}),Ember.Handlebars.helper("type-ahead",Ember.TypeAheadComponent)}(this);